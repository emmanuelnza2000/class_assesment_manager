<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>View Assessment</title>
</head>
<body>

  <h1>Assessment Details</h1>

  <div id="details"></div>

  <script>
    async function loadDetails() {
      const urlParams = new URLSearchParams(window.location.search);
      const id = urlParams.get('id');

      const res = await fetch(`/api/assessments`);  // Changed from /api/notes
      const notes = await res.json();
      const note = notes.find(n => n.id == id);

      if (!note) return document.body.innerHTML = "<p>Assessment not found</p>";

      document.getElementById("details").innerHTML = `
        <h2>${note.title}</h2>
        <p>${note.description}</p>  <!-- Changed from note.content -->
        <button onclick="location.href='edit.html?id=${id}'">Edit</button>
        <button onclick="deleteNote(${id})">Delete</button>
      `;
    }

    async function deleteNote(id) {
      if (confirm("Delete this assessment?")) {
        await fetch(`/api/assessments/${id}`, { method: "DELETE" });  <!-- Changed from /api/notes -->
        alert("Assessment deleted");
        location.href = "index.html";
      }
    }

    loadDetails();
  </script>

</body>
</html>
